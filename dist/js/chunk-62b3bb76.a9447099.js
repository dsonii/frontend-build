(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62b3bb76"],{"1dfa":function(t,e,r){},b3d2:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("section",{staticClass:"tables"},[e("div",{staticClass:"row"},[e("Breadcrumb",{attrs:{breadcrumbs:t.breadcrumbs}}),e("div",{staticClass:"col-lg-8 offset-lg-2 grid-margin stretch-card"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("createForm",{attrs:{formtype:t.formtype}})],1)])])],1)])])},a=[],s=r("19cf"),l=function(){var t=this,e=t._self._c;return e("div",[e("b-form",{attrs:{if:t.formtype},on:{submit:function(e){return e.preventDefault(),t.createOffer.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Offer name","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-input",{class:{"is-invalid":t.submitted&&t.$v.form.name.$error},attrs:{id:"name-input",type:"text",placeholder:"Enter name",state:t.validateState("name")},on:{input:function(e){t.form.name=e.target.value.toUpperCase()}},model:{value:t.$v.form.name.$model,callback:function(e){t.$set(t.$v.form.name,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.name.$model"}}),t.submitted&&!t.$v.form.name.required?e("div",{staticClass:"invalid-feedback"},[t._v(" offer name is required ")]):t._e()],1),e("b-form-group",{attrs:{label:"Start Date","label-for":"start-date-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("Datetime",{staticClass:"theme-ferri",attrs:{type:"date",title:"start date","input-class":"form-control",zone:"Asia/Kolkata","backdrop-click":!0},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),e("b-form-group",{attrs:{label:"End Date","label-for":"end-date-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("Datetime",{staticClass:"theme-ferri",attrs:{type:"date",title:"end date","input-class":"form-control",zone:"Asia/Kolkata","backdrop-click":!0},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1),e("b-form-group",{attrs:{label:"Offer Code","label-for":"offer-code-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-input",{class:{"is-invalid":t.submitted&&t.$v.form.code.$error},attrs:{id:"chassis-no-input",type:"text",placeholder:"Enter offer code.",state:t.validateState("code"),formatter:t.formatter},model:{value:t.$v.form.code.$model,callback:function(e){t.$set(t.$v.form.code,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.code.$model"}}),t.submitted&&!t.$v.form.code.required?e("div",{staticClass:"invalid-feedback"},[t._v(" offer code is required ")]):t._e()],1),e("b-form-group",{attrs:{label:"Discount (%)","label-for":"discount-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-input",{attrs:{id:"discount-input",type:"number",placeholder:"Enter discount %."},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount","string"===typeof e?e.trim():e)},expression:"form.discount"}})],1),e("b-form-group",{attrs:{label:"No of attempt","label-for":"attempt-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-input",{attrs:{id:"attempt-input",type:"number",placeholder:"Enter no of attempt."},model:{value:t.form.attempt,callback:function(e){t.$set(t.form,"attempt","string"===typeof e?e.trim():e)},expression:"form.attempt"}})],1),e("b-form-group",{attrs:{label:"Offer picture (213x102)","label-for":"picture-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[t.form.picture?e("div",[e("img",{staticClass:"img-fluid",attrs:{src:t.form.picture,width:"213",height:"102"}}),e("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(e){return t.removeImage("picture")}}},[e("i",{staticClass:"mdi mdi-close"})])]):e("div",[e("b-form-file",{class:{"is-invalid":t.submitted&&t.$v.form.picture.$error},attrs:{id:"picture-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a Offer picture or drop it here...",state:t.validateState("picture")},on:{change:function(e){return t.onFileChange(e,"picture")}}}),t.submitted&&!t.$v.form.picture.required?e("b-form-invalid-feedback",[t._v("picture is required")]):t._e()],1)]),e("b-form-group",{staticClass:"mt-3",attrs:{label:"type","label-for":"route-type-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-radio-group",{class:{"is-invalid":t.submitted&&t.$v.form.type.$error},attrs:{options:t.routeoptions,state:t.validateState("type")},on:{change:function(e){return t.changeRoute(e)}},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),t.submitted&&!t.$v.form.type.required?e("b-form-invalid-feedback",[t._v("Please select type")]):t._e()],1),t.route?e("b-form-group",{attrs:{label:"Route Name","label-for":"route-input","label-cols-sm":"4","label-cols-lg":"5","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-select",{attrs:{options:t.routes},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an routes --")])]},proxy:!0}],null,!1,2000711963),model:{value:t.form.routeId,callback:function(e){t.$set(t.form,"routeId","string"===typeof e?e.trim():e)},expression:"form.routeId"}})],1):t._e(),e("b-form-group",{staticClass:"mt-3",attrs:{label:"Offer terms","label-for":"terms-input","invalid-feedback":"terms is required","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"9"}},[e("vue-editor",{staticClass:"mt-3",class:{"is-invalid":t.submitted&&t.$v.form.terms.$error},attrs:{state:t.validateState("terms")},model:{value:t.form.terms,callback:function(e){t.$set(t.form,"terms",e)},expression:"form.terms"}})],1),e("b-form-group",{staticClass:"mt-3",attrs:{label:"Status ","label-for":"status-input","invalid-feedback":"status is required","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"9"}},[e("b-form-radio-group",{attrs:{options:t.options,name:"status"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),t.submitted&&!t.$v.form.status.required?e("b-form-invalid-feedback",[t._v("Please select one")]):t._e()],1),e("b-form-group",{staticClass:"col-md-6 offset-md-5"},[e("b-button",{staticClass:"btn btn-lg btn-success text-center",attrs:{type:"submit"}},[t._v("Submit")])],1)],1)],1)},i=[],n=(r("14d9"),r("dde5")),c=r("1dce"),m=r("b5ae"),u=r("859b"),d=(r("d355"),r("7f45")),f=r.n(d),p=r("5873"),b=r("be92"),v=r("370e"),g={mixins:[c["validationMixin"]],name:"createform",props:{formtype:{type:Boolean},handleoffertype:{type:Function}},components:{Datetime:u["Datetime"],VueEditor:p["a"]},data(){return{route:!1,isEditing:!1,options:[{text:"Active",value:!0},{text:"Inactive",value:!1,default:!0}],routeoptions:[{text:"All",value:!0,default:!0},{text:"Specific route",value:!1}],form:{adminId:"",name:"",start_date:"",end_date:"",code:"",discount:"",attempt:"",routeId:"",picture:"",terms:"",status:""},submitted:!1,loading:!1,routes:[]}},validations:{form:{name:{required:m["required"]},code:{required:m["required"]},picture:{required:m["required"]},type:{required:m["required"]},terms:{required:m["required"]},status:{required:m["required"]}}},computed:{...Object(b["e"])(v["a"],["getUser"])},mounted(){this.form.start_date=f()().tz("Asia/Kolkata").format(),this.form.end_date=f()().tz("Asia/Kolkata").add(7,"days").format(),this.loadRouteItems()},methods:{loadRouteItems(){n["y"].load().then(t=>{this.routes=t.data})},changeRoute(t){0==t?this.route=!0:(this.route=!1,this.form.routeId="")},onFileChange(t,e){var r=t.target.files||t.dataTransfer.files;console.log(r),r.length&&this.createImage(r[0],e)},createImage(t,e){var r=new FileReader,o=this;r.onload=t=>{o.form[e]=t.target.result},r.readAsDataURL(t)},removeImage:function(t){this.form[t]=""},formatter(t){return t.toUpperCase()},validateState(t){const{$dirty:e,$error:r}=this.$v.form[t];return e?!r:null},async createOffer(){try{if(this.submitted=!0,this.$v.$touch(),this.$v.$invalid)return;this.form.adminId=this.getUser.id;const t=await n["q"].create(this.form);t.status&&(this.$toast.open({message:t.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/offers"}),1e3))}catch(t){this.$toast.open({message:t+"dfsdf",type:"error",position:"top-right",duration:5e3})}}}},h=g,$=(r("cbb6"),r("2877")),y=Object($["a"])(h,l,i,!1,null,"1b66346b",null),k=y.exports,_={name:"offercreate",data(){return{formtype:!1,breadcrumbs:{title:"Create offer",b1:"Manage offer",b2:"offer",b3:"Index",link:!0,name:"offer"}}},components:{Breadcrumb:s["a"],createForm:k}},C=_,x=Object($["a"])(C,o,a,!1,null,"8a9c2a8e",null);e["default"]=x.exports},cbb6:function(t,e,r){"use strict";r("1dfa")}}]);
//# sourceMappingURL=chunk-62b3bb76.a9447099.js.map