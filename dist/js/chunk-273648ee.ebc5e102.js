(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-273648ee"],{"19cf":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"level"},[t("div",{staticClass:"level-left"},[t("ul",[t("li",{staticClass:"is-active"},[t("a",[e._v(e._s(e.breadcrumbs.b1))])]),t("li",{staticClass:"is-active"},[t("a",[e._v(e._s(e.breadcrumbs.title))])])])])])])},r=[],s={name:"breadcrumb",props:["breadcrumbs"]},o=s,l=(i("2c06"),i("2877")),n=Object(l["a"])(o,a,r,!1,null,"7cf2419e",null);t["a"]=n.exports},"27ba":function(e,t,i){},"2c06":function(e,t,i){"use strict";i("526f")},"526f":function(e,t,i){},"5a23":function(e,t,i){"use strict";i("27ba")},b52b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("section",{staticClass:"tables"},[t("div",{staticClass:"row"},[t("Breadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),t("div",{staticClass:"col-lg-10 offset-lg-1 grid-margin stretch-card"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("createForm",{attrs:{formtype:e.formtype}})],1)])])],1)])])},r=[],s=i("19cf"),o=function(){var e=this,t=e._self._c;return t("div",[t("b-form",{attrs:{if:e.formtype},on:{submit:function(t){return t.preventDefault(),e.createBus.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Name","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.name.$error},attrs:{id:"name-input",type:"text",placeholder:"Enter name",state:e.validateState("name")},model:{value:e.$v.form.name.$model,callback:function(t){e.$set(e.$v.form.name,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.name.$model"}}),e.submitted||!e.$v.form.name.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" name is required ")]):e._e(),e.$v.form.name.alphaNumSpace?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphanumerics characters with space are allowed")]),e.$v.form.name.uniqueName?e._e():t("b-form-invalid-feedback",[e._v(" Vehicle name is already registered. ")])],1),t("b-form-group",{attrs:{label:"Plate/Registration Number","label-for":"reg-no-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.reg_no.$error},attrs:{id:"reg-no-input",type:"text",placeholder:"Enter plate/registration number",state:e.validateState("reg_no")},model:{value:e.$v.form.reg_no.$model,callback:function(t){e.$set(e.$v.form.reg_no,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.reg_no.$model"}}),e.submitted||!e.$v.form.reg_no.required?t("b-form-invalid-feedback",[e._v(" plate/registration number is required ")]):e._e(),e.$v.form.reg_no.$error||e.$v.form.reg_no.alphaNumSpace?t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphanumerics characters with space are allowed")]):e._e(),e.$v.form.reg_no.minLength?e._e():t("b-form-invalid-feedback",[e._v(" Plate/registration number must hav at min "+e._s(e.$v.form.reg_no.$params.minLength.min)+" letters. ")]),e.$v.form.reg_no.maxLength?e._e():t("b-form-invalid-feedback",[e._v(" Plate/registration number must have at max "+e._s(e.$v.form.reg_no.$params.maxLength.max)+" letters. ")]),e.$v.form.reg_no.uniqueRegNo?e._e():t("b-form-invalid-feedback",[e._v(" This plate/registration number is already registered. ")])],1),t("b-form-group",{attrs:{label:"Model No.","label-for":"model-no-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.model_no.$error},attrs:{id:"model-no-input",type:"text",placeholder:"Enter model no.",state:e.validateState("model_no")},model:{value:e.$v.form.model_no.$model,callback:function(t){e.$set(e.$v.form.model_no,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.model_no.$model"}}),e.submitted||!e.$v.form.model_no.required?t("b-form-invalid-feedback",[e._v(" model no is required ")]):e._e(),e.$v.form.model_no.alphaNum?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphanumerics characters are allowed")]),e.$v.form.model_no.uniqueModelNo?e._e():t("b-form-invalid-feedback",[e._v(" This Model number is already registered. ")])],1),t("b-form-group",{attrs:{label:"Chassis No.","label-for":"chassis-no-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.chassis_no.$error},attrs:{id:"chassis-no-input",type:"text",placeholder:"Enter chassis no.",state:e.validateState("chassis_no")},model:{value:e.$v.form.chassis_no.$model,callback:function(t){e.$set(e.$v.form.chassis_no,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.chassis_no.$model"}}),e.submitted||!e.$v.form.chassis_no.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" chassis no is required ")]):e._e(),e.$v.form.chassis_no.alphaNum?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphanumerics characters are allowed")]),e.$v.form.chassis_no.uniqueChassisNo?e._e():t("b-form-invalid-feedback",[e._v(" This chassis number is already registered. ")])],1),t("b-form-group",{attrs:{label:"Brand No","label-for":"brand-no-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.brand.$error},attrs:{id:"chassis-no-input",type:"text",placeholder:"Enter brand name.",state:e.validateState("brand")},model:{value:e.$v.form.brand.$model,callback:function(t){e.$set(e.$v.form.brand,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.brand.$model"}}),e.submitted||!e.$v.form.brand.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" brand no is required ")]):e._e(),e.$v.form.brand.alphaNum?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphanumerics characters are allowed")])],1),t("b-form-group",{attrs:{label:"Amenities","label-for":"tags-pills","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-checkbox-group",{class:{"is-invalid":e.submitted||e.$v.form.amenities.$error},attrs:{options:e.amenitieslists,state:e.validateState("amenities")},model:{value:e.$v.form.amenities.$model,callback:function(t){e.$set(e.$v.form.amenities,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.amenities.$model"}},[t("b-form-invalid-feedback",[e._v("Amenities is a required field.")])],1)],1),t("b-form-group",{attrs:{label:"Vehicle Type","label-for":"bus-type-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted||e.$v.form.bustypeId.$error},attrs:{options:e.bustypes,state:e.validateState("bustypeId")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select an vehicle type --")])]},proxy:!0}]),model:{value:e.$v.form.bustypeId.$model,callback:function(t){e.$set(e.$v.form.bustypeId,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.bustypeId.$model"}}),e.submitted||!e.$v.form.bustypeId.required?t("div",{staticClass:"invalid-feedback"},[e._v(" vehicle type is required ")]):e._e()],1),t("b-form-group",{attrs:{label:"Vehicle Layout","label-for":"bus-layout-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted||e.$v.form.buslayoutId.$error},attrs:{options:e.buslayouts,state:e.validateState("buslayoutId")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select an vehicle layout --")])]},proxy:!0}]),model:{value:e.$v.form.buslayoutId.$model,callback:function(t){e.$set(e.$v.form.buslayoutId,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.buslayoutId.$model"}}),e.submitted||!e.$v.form.buslayoutId.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" vehicle layout is required ")]):e._e()],1),t("b-form-group",{staticClass:"mt-3",attrs:{label:"Status ","label-for":"status-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-radio-group",{class:{"is-invalid":e.submitted||e.$v.form.status.$error},attrs:{options:e.options,name:"status",state:e.validateState("status")},model:{value:e.$v.form.status.$model,callback:function(t){e.$set(e.$v.form.status,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.status.$model"}}),e.submitted||!e.$v.form.status.required?t("b-form-invalid-feedback",[e._v("Please select one")]):e._e()],1),t("p",{staticClass:"card-description fw-500"},[t("b",[e._v("Documents")])]),t("br"),t("b-form-group",{attrs:{label:"Vehicle picture","label-for":"picture-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.picture?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.picture,width:"250",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("picture")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"picture-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a Profile picture or drop it here..."},on:{change:function(t){return e.onFileChange(t,"picture")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate registration","label-for":"certificate-registration-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.certificate_registration?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.certificate_registration,width:"350",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("certificate_registration")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"certificate-registration-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a Licence or drop it here..."},on:{change:function(t){return e.onFileChange(t,"certificate_registration")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate Pollution","label-for":"certificate-pollution-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.certificate_pollution?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.certificate_pollution,width:"350",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("certificate_pollution")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"certificate-pollution-input",accept:"image/jpeg, image/png, image/gif",placeholder:"Choose a certificate pollution or drop it here..."},on:{change:function(t){return e.onFileChange(t,"certificate_pollution")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate Pollution Expiry Date","label-for":"certificate-pollution-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"certificate-pollution-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.certificate_pollution_expiry_date.$model,callback:function(t){e.$set(e.$v.form.certificate_pollution_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.certificate_pollution_expiry_date.$model"}})],1)]),t("b-form-group",{attrs:{label:"Certificate Insurance","label-for":"certificate-insurance-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.certificate_insurance?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.certificate_insurance,width:"350",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("certificate_insurance")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"certificate-insurance-input",accept:"image/jpeg, image/png, image/gif",placeholder:"Choose a certificate insurance or drop it here..."},on:{change:function(t){return e.onFileChange(t,"certificate_insurance")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate Insurance Expiry Date","label-for":"certificate-insurance-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"certificate-insurance-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.certificate_insurance_expiry_date.$model,callback:function(t){e.$set(e.$v.form.certificate_insurance_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.certificate_insurance_expiry_date.$model"}})],1)]),t("b-form-group",{attrs:{label:"Certificate Fitness","label-for":"certificate-fitness-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.certificate_fitness?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.certificate_fitness,width:"350",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("certificate_fitness")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"certificate-fitness-input",accept:"image/jpeg, image/png, image/gif",placeholder:"Choose a certificate fitness or drop it here..."},on:{change:function(t){return e.onFileChange(t,"certificate_fitness")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate Fitness Expiry Date","label-for":"certificate-fitness-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"certificate-fitness-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.certificate_fitness_expiry_date.$model,callback:function(t){e.$set(e.$v.form.certificate_fitness_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.certificate_fitness_expiry_date.$model"}})],1)]),t("b-form-group",{attrs:{label:"Certificate Permit","label-for":"certificate-permit-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.certificate_permit?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.certificate_permit,width:"350",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("certificate_permit")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"certificate-ermit-input",accept:"image/jpeg, image/png, image/gif",placeholder:"Choose a certificate permit or drop it here..."},on:{change:function(t){return e.onFileChange(t,"certificate_permit")}}})],1)]),t("b-form-group",{attrs:{label:"Certificate Permit Expiry Date","label-for":"certificate-permit-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"certificate-permit-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.certificate_permit_expiry_date.$model,callback:function(t){e.$set(e.$v.form.certificate_permit_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.certificate_permit_expiry_date.$model"}})],1)]),t("b-form-group",{staticClass:"col-md-6 offset-md-5"},[t("b-button",{staticClass:"btn btn-lg btn-success text-center",attrs:{type:"submit"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.submitted,expression:"submitted"}],staticClass:"pl-2 spinner-border spinner-border-sm"}),e._v("Submit")])],1)],1)],1)},l=[],n=(i("14d9"),i("dde5")),c=i("1dce"),m=i("b5ae"),d=i("be92"),u=i("370e"),f={mixins:[c["validationMixin"]],name:"createform",props:{formtype:{type:Boolean},handlebustype:{type:Function}},data(){return{isEditing:!1,options:[{text:"Active",value:"true"},{text:"Inactive",value:"false",default:!0}],form:{adminId:"",name:"",reg_no:"",brand:"",model_no:"",chassis_no:"",bustypeId:null,buslayoutId:null,picture:"",amenities:[],certificate_registration:"",certificate_pollution:"",certificate_pollution_expiry_date:"",certificate_insurance:"",certificate_insurance_expiry_date:"",certificate_fitness:"",certificate_fitness_expiry_date:"",certificate_permit:"",certificate_permit_expiry_date:"",status:""},submitted:!1,loading:!1,buslayouts:[],bustypes:[],amenitieslists:[{text:"AC",value:"ac"},{value:"snacks-and-drinks",text:"Snacks and drinks"},{text:"WC",value:"wc"},{text:"WIFI",value:"wifi"},{text:"GPS Tracking",value:"gps"},{value:"usb",text:"USB charging portal"},{value:"tv",text:"TV Screen"}]}},validations:{form:{name:{required:m["required"],alphaNumSpace:m["helpers"].regex("alphaNumSpace",/^[a-z0-9_ ]*$/i),async uniqueName(e){if(""===e)return!0;const{status:t}=await n["f"].isBusExists({name:e});return t}},reg_no:{required:m["required"],alphaNumSpace:m["helpers"].regex("alphaNumSpace",/^[a-z0-9_ ]*$/i),minLength:Object(m["minLength"])(4),maxLength:Object(m["maxLength"])(10),async uniqueRegNo(e){if(""===e)return!0;const{status:t}=await n["f"].isBusExists({reg_no:e});return t}},brand:{required:m["required"],alphaNum:m["alphaNum"]},model_no:{required:m["required"],alphaNum:m["alphaNum"],async uniqueModelNo(e){if(""===e)return!0;const{status:t}=await n["f"].isBusExists({model_no:e});return t}},amenities:{required:m["required"]},chassis_no:{required:m["required"],alphaNum:m["alphaNum"],maxLength:Object(m["maxLength"])(20),async uniqueChassisNo(e){if(""===e)return!0;const{status:t}=await n["f"].isBusExists({chassis_no:e});return t}},bustypeId:{required:m["required"]},buslayoutId:{required:m["required"]},status:{required:m["required"]},certificate_pollution_expiry_date:{},certificate_insurance_expiry_date:{},certificate_fitness_expiry_date:{},certificate_permit_expiry_date:{}}},computed:{...Object(d["e"])(u["a"],["getUser"])},methods:{async loadBustypeItems(){const e=await n["h"].load();e.status&&(this.bustypes=e.data)},async loadBuslayoutItems(){const e=await n["g"].load();e.status&&(this.buslayouts=e.data)},validateState(e){const{$dirty:t,$error:i}=this.$v.form[e];return t?!i:null},onFileChange(e,t){var i=e.target.files||e.dataTransfer.files;console.log(i),i.length&&this.createImage(i[0],t)},createImage(e,t){var i=new FileReader,a=this;i.onload=e=>{a.form[t]=e.target.result},i.readAsDataURL(e)},removeImage:function(e){this.form[e]=""},async createBus(){try{if(this.submitted=!0,this.$v.$touch(),this.$v.$invalid)return this.submitted=!1,void window.scrollTo({top:10,left:0,behavior:"smooth"});this.form.adminId=this.getUser.id;const e=await n["f"].create(this.form);e.status&&(this.submitted=!1,this.$toast.open({message:e.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/buses"}),3e3),this.submitted=!1)}catch(e){this.$toast.open({message:e+"dfsdf",type:"error",position:"top-right",duration:5e3})}}},mounted(){this.loadBustypeItems(),this.loadBuslayoutItems()}},b=f,p=(i("5a23"),i("2877")),v=Object(p["a"])(b,o,l,!1,null,"88f7075e",null),g=v.exports,_={name:"buscreate",data(){return{formtype:!1,breadcrumbs:{title:"Create vehicle",b1:"Manage vehicle",b2:"Vehicle",b3:"Index",link:!0,name:"bus"}}},components:{Breadcrumb:s["a"],createForm:g}},h=_,$=Object(p["a"])(h,a,r,!1,null,"07fb13b2",null);t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-273648ee.ebc5e102.js.map