(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60df80be"],{"13d5":function(t,e,s){"use strict";var r=s("23e7"),o=s("d58f").left,a=s("a640"),i=s("1212"),n=s("9adc"),l=!n&&i>79&&i<83,c=l||!a("reduce");r({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},"40ea":function(t,e,s){"use strict";s("9ba8")},8558:function(t,e,s){"use strict";var r=s("cfe9"),o=s("b5db"),a=s("c6b6"),i=function(t){return o.slice(0,t.length)===t};t.exports=function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"}()},9485:function(t,e,s){"use strict";var r=s("23e7"),o=s("2266"),a=s("59ed"),i=s("825a"),n=s("46c4"),l=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){i(this),a(t);var e=n(this),s=arguments.length<2,r=s?void 0:arguments[1],c=0;if(o(e,(function(e){s?(s=!1,r=e):r=t(r,e,c),c++}),{IS_RECORD:!0}),s)throw new l("Reduce of empty iterator with no initial value");return r}})},"9adc":function(t,e,s){"use strict";var r=s("8558");t.exports="NODE"===r},"9ba8":function(t,e,s){},"9d4a":function(t,e,s){"use strict";s("9485")},a640:function(t,e,s){"use strict";var r=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&r((function(){s.call(null,e||function(){return 1},1)}))}},d58f:function(t,e,s){"use strict";var r=s("59ed"),o=s("7b0b"),a=s("44ad"),i=s("07fa"),n=TypeError,l="Reduce of empty array with no initial value",c=function(t){return function(e,s,c,u){var d=o(e),m=a(d),f=i(d);if(r(s),0===f&&c<2)throw new n(l);var p=t?f-1:0,b=t?-1:1;if(c<2)while(1){if(p in m){u=m[p],p+=b;break}if(p+=b,t?p<0:f<=p)throw new n(l)}for(;t?p>=0:f>p;p+=b)p in m&&(u=s(u,m[p],p,d));return u}};t.exports={left:c(!1),right:c(!0)}},fb2e:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"tables"},[e("div",{staticClass:"row"},[e("Breadcrumb",{attrs:{breadcrumbs:t.breadcrumbs}}),e("div",{staticClass:"col-lg-10 offset-lg-1 grid-margin stretch-card"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("editForm")],1)])])],1)])},o=[],a=s("19cf"),i=function(){var t=this,e=t._self._c;return e("div",[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.updateAssign.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Vehicle Schedule","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("multiselect",{class:{"is-invalid":t.submitted||t.$v.form.route.$error},attrs:{state:t.validateState("route"),options:t.roptions,placeholder:"start typing to search Route Name",label:"route_name","track-by":"id",searchable:!0,loading:!0},on:{"search-change":t.fetchRoutes},scopedSlots:t._u([{key:"option",fn:function(s){return[""!=s.option.route_name?e("p",[t._v(" Route : "+t._s(s.option.route_name)+" ")]):t._e(),""!=s.option.departure_time?e("p",[t._v(" "+t._s(t.momentFormat(s.option.departure_time,t.timeFormat.value))+" - "+t._s(t.momentFormat(s.option.arrival_time,t.timeFormat.value))+" ")]):t._e()]}}]),model:{value:t.$v.form.route.$model,callback:function(e){t.$set(t.$v.form.route,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.route.$model"}},[e("template",{slot:"noOptions"},[t._v(" No Route name found.")]),e("template",{slot:"noResult"},[t._v(" Route name searched not matched.")])],2),t.submitted||!t.$v.form.route.required?e("b-form-invalid-feedback",[t._v(" Route name is required ")]):t._e()],1),e("b-form-group",{attrs:{label:"Driver","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("multiselect",{class:{"is-invalid":t.submitted||t.$v.form.driver.$error},attrs:{state:t.validateState("driver"),options:t.options,placeholder:"type to drivers phone, name..",label:"title","track-by":"title",searchable:!0,loading:t.submitted},on:{"search-change":t.fetchDrivers},scopedSlots:t._u([{key:"option",fn:function(s){return[e("b-img",{attrs:{width:"40",height:"40",variant:"primary",src:s.option.picture}}),t._v(" "+t._s(s.option.title)+" : +"+t._s(s.option.country_code)+t._s(s.option.phone)+" ")]}}]),model:{value:t.$v.form.driver.$model,callback:function(e){t.$set(t.$v.form.driver,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.driver.$model"}},[e("template",{slot:"noOptions"},[t._v(" No driver found.")]),e("template",{slot:"noResult"},[t._v(" Driver searched not matched.")])],2),t.submitted||!t.$v.form.driver.required?e("b-form-invalid-feedback",[t._v(" Driver name is required ")]):t._e()],1),e("b-form-group",{attrs:{label:"Date Time","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("date-picker",{attrs:{"disabled-date":t.disabledBeforeTodayAndAfterAWeek,multiple:"",format:"YYYY-MM-DD","value-type":"format",placeholder:"Please select the dates",clearable:!0,inline:!0},scopedSlots:t._u([{key:"input",fn:function({props:s}){return t._l(s.value.split(","),(function(s){return e("b-badge",{key:s,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(s)+" ")])}))}}]),model:{value:t.form.dates,callback:function(e){t.$set(t.form,"dates",e)},expression:"form.dates"}})],1),e("b-form-group",{attrs:{label:"Travel Status","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-select",{attrs:{options:t.traveloptions},model:{value:t.form.trip_status,callback:function(e){t.$set(t.form,"trip_status",e)},expression:"form.trip_status"}})],1),e("b-form-group",{staticClass:"col-md-6 offset-md-5"},[e("b-button",{staticClass:"btn btn-lg btn-success text-center",attrs:{type:"submit"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.submitted,expression:"submitted"}],staticClass:"pl-2 spinner-border spinner-border-sm"}),t._v("Submit")])],1)],1)],1)},n=[],l=(s("14d9"),s("13d5"),s("0643"),s("fffc"),s("a573"),s("9d4a"),s("dde5")),c=s("1dce"),u=s("b5ae"),d=s("2ef0"),m=s.n(d),f=s("ec45"),p=(s("411c"),s("8e5f")),b=s.n(p),h=s("be92"),v=s("370e"),g=s("83a3"),y=s("a2b6"),D=s("7f45"),_=s.n(D),w={mixins:[c["validationMixin"]],name:"editform",data(){return{submitted:!1,loading:!1,options:[],aoptions:[],roptions:[],traveloptions:[{value:"ASSIGNED",text:"ASSIGNED"},{value:"EXPIRED",text:"EXPIRED"},{value:"COMPLETED",text:"COMPLETED"},{value:"NOTSTARTED",text:"NOTSTARTED"},{value:"RIDING",text:"RIDING"}],form:{route:null,driver:{},assistant:{},dates:"",trip_status:""}}},validations:{form:{route:{required:u["required"]},driver:{required:u["required"]},assistant:{}}},computed:{...Object(h["e"])(v["a"],["getUser"]),...Object(h["e"])(g["a"],["timezone","dateFormat","timeFormat"])},components:{Multiselect:b.a,DatePicker:f["a"]},methods:{momentFormat(t,e){return Object(y["a"])(t,e)},getLastDate(){if(this.form.dates.length>0){const t=this.form.dates.reduce((t,e)=>new Date(e)<new Date(t)?new Date(e):new Date(t),new Date(this.form.dates[0]));return t}},disabledBeforeTodayAndAfterAWeek(t){const e=this.getLastDate()?this.getLastDate():new Date;return e.setHours(0,0,0,0),t<e||t>new Date(e.getTime()+2592e6)},async getBookingAssign(){try{const t=await l["b"].find(this.$route.params.id);t&&t.status&&(t.data.dates=t.data.dates.map(t=>_()(t).tz(this.timezone).format("YYYY-MM-DD")),this.form=t.data,this.getLastDate())}catch(t){console.log("params",t),this.$toast.open({message:t.message,type:"error",position:"top-right",duration:5e3})}},async loadRoutes(){const{items:t}=await l["y"].dataRoutes();this.roptions=t},validateState(t){const{$dirty:e,$error:s}=this.$v.form[t];return e?!s:null},fetchDrivers(t,e){if(t.length){let s="driver";this.search(e,t,s,this)}},fetchRoutes(t,e){this.search3(e,t,this)},fetchAssistants(t,e){if(t.length){let s="assistant";this.search2(e,t,s,this)}},search:m.a.debounce(async(t,e,s,r)=>{try{const t=await l["l"].q({type:s,search:e});r.options=t.items}catch(o){console.log("err",o)}},350),search2:m.a.debounce(async(t,e,s,r)=>{try{const t=await l["l"].q({type:s,search:e});r.aoptions=t.items}catch(o){console.log("err",o)}},350),search3:m.a.debounce(async(t,e,s)=>{try{const{data:t}=await l["e"].q({search:e});s.roptions=t}catch(r){console.log("err",r)}},350),async updateAssign(){try{if(this.submitted=!0,this.$v.$touch(),this.$v.$invalid)return void(this.submitted=!1);this.form.adminId=this.getUser.id;const t=await l["b"].update(this.$route.params.id,this.form);t.status&&(this.submitted=!1,this.$toast.open({message:t.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/trips/assign/list"}),3e3))}catch(t){this.$toast.open({message:t+"dfsdf",type:"error",position:"top-right",duration:5e3})}}},mounted(){this.loadRoutes(),this.getBookingAssign()}},$=w,R=(s("40ea"),s("1583"),s("2877")),k=Object(R["a"])($,i,n,!1,null,"1e70d8ff",null),E=k.exports,A={name:"tripassignedit",data(){return{breadcrumbs:{title:"Edit Assign",b1:"Manage Assign",b2:"Assign",b3:"Index",link:!0,name:"Assign"}}},components:{Breadcrumb:a["a"],editForm:E}},x=A,O=Object(R["a"])(x,r,o,!1,null,null,null);e["default"]=O.exports}}]);
//# sourceMappingURL=chunk-60df80be.2ae18fae.js.map