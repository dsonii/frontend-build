(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e25a9d88"],{"8a49":function(t,a,e){"use strict";var s=function(){var t=this,a=t._self._c;return a("div",[a("b-tabs",{attrs:{pills:"","content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Booking Details",active:""}},[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"4"}},[t._v("PNR No")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.pnr_no))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Date / Time")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" "+t._s(t.dateConvert(t.modalData.booking_date,t.dateFormat.value))+" "),a("br"),t._v(" "+t._s(t.modalData.start_time)+" - "+t._s(t.modalData.drop_time)+" ")])]),a("b-col",{attrs:{cols:"4"}},[t._v("Stops / Route")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" "+t._s(t.modalData.location.pickup_location)+" - "+t._s(t.modalData.location.drop_location)+" "),a("br"),t._v(" from "),a("b",[t._v(t._s(t.modalData.location.route_name))])])]),a("b-col",{attrs:{cols:"4"}},[t._v("Vehicle")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" Name : "+t._s(t.modalData.bus_reg_no)),a("br"),t._v(" Model Number : "+t._s(t.modalData.bus_model_no)),a("br"),t._v(" Plate/Registration Number : "+t._s(t.modalData.bus_reg_no)+" "),a("br"),t._v(" Type : "+t._s(t.modalData.bus_type_name)),a("br"),t._v(" Layout Name : "+t._s(t.modalData.bus_layout_name)),a("br"),t._v(" Layout : "+t._s(t.layoutName(t.modalData.bus_layout_layout))+" ")])]),a("b-col",{attrs:{cols:"4"}},[t._v("Is Pass")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.is_pass))])]),"Yes"===t.modalData.is_pass?a("b-col",{attrs:{cols:"4"}},[t._v("No of Pass")]):t._e(),"Yes"===t.modalData.is_pass?a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.no_of_pass))])]):t._e(),a("b-col",{attrs:{cols:"4"}},[t._v("Total Passengers")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.passengers))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Seat Number")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.seat_nos.toString()))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Travel status")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.travel_status))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Created By")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" "+t._s(t.dateConvert(t.modalData.createdAt,`${t.dateFormat.value} ${t.timeFormat.value}`))+" ")])])],1)],1)],1),a("b-tab",{attrs:{title:"Passenger Details"}},[a("b-table",{attrs:{striped:"",hover:"",items:t.modalData.passenger_details}})],1),a("b-tab",{attrs:{title:"Payment Details"}},[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"4"}},[t._v("Payment Status")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.payment_status))])]),a("b-col",{attrs:{cols:"4"}},[t._v("OrderID")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.orderId))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Method")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.modalData.payment_details.method))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Payment created")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" "+t._s(t.dateConvert(t.modalData.payment_details.payment_created_date,`${t.dateFormat.value} ${t.timeFormat.value}`))+" ")])]),a("b-col",{attrs:{cols:"4"}},[t._v("Sub Total")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.defaultCurrency)+t._s(t.modalData.sub_total))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Tax ("+t._s(t.modalData.tax)+"%)")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.defaultCurrency)+t._s(t.modalData.tax_amount))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Fee")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(t._s(t.defaultCurrency)+t._s(t.modalData.fee))])]),a("b-col",{attrs:{cols:"4"}},[t._v("Total (round off)")]),a("b-col",{attrs:{cols:"8"}},[a("p",[t._v(" "+t._s(t.defaultCurrency)+t._s(t.modalData.payment_details.amount)+" ")])])],1)],1)],1)],1)],1)},o=[],r=e("be92"),l=e("83a3"),n=e("a2b6"),i={name:"modelView",props:["modalData"],computed:{...Object(r["e"])(l["a"],["dateFormat","timeFormat","defaultCurrency"])},methods:{dateConvert(t,a){return Object(n["a"])(t,a)},layoutName(t){return"layout-1"==t?"1 X 1":"layout-2"==t?"1 X 2":"layout-3"==t?"2 X 1":"layout-4"==t?"2 X 2":"layout-5"==t?"2 X 3":"layout-6"==t?"3 X 2":void 0}}},d=i,c=e("2877"),m=Object(c["a"])(d,s,o,!1,null,null,null);a["a"]=m.exports},a47e:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",[a("section",{staticClass:"tables"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("Breadcrumb",{attrs:{breadcrumbs:t.breadcrumbs}})],1),a("div",{staticClass:"col-lg-12"},[a("vue-bootstrap4-table",{attrs:{rows:t.rows,columns:t.columns,config:t.config,"total-rows":t.total_rows,classes:t.classes,"show-loader":t.showLoader},on:{"refresh-data":t.onRefreshData,"on-change-query":t.onChangeQuery},scopedSlots:t._u([{key:"date_time",fn:function(e){return[t._v(" "+t._s(t.format(e.row.booking_date,t.dateFormat.value))+" "),a("br"),a("small",[t._v(t._s(e.row.start_time)+" - "+t._s(e.row.drop_time))]),t._v("` ")]}},{key:"customer",fn:function(e){return[a("div",{staticClass:"d-flex flex-column"},[a("span",[t._v(t._s(e.row.customer_name))]),a("span",[t._v(" "+t._s(e.row.customer_phone))])])]}},{key:"stopping_points",fn:function(e){return[a("span",[a("small",[t._v(t._s(e.row.pickup_location_title))]),t._v(" - "),a("small",[t._v(" "+t._s(e.row.drop_location_title))])]),a("br"),a("small",[t._v("from "),a("b",[t._v(t._s(e.row.route_name))])])]}},{key:"payment_created",fn:function(a){return[t._v(" "+t._s(t.format(a.row.payment_created))+" ")]}},{key:"payment_method",fn:function(e){return["payment_method"==e.column.name?a("span",["wallet"==e.row.payment_method||"WALLET"==e.row.payment_method||"Wallet"==e.row.payment_method?a("b-badge",{attrs:{variant:"success"}},[a("span",{domProps:{innerHTML:t._s(e.row.payment_method)}})]):t._e(),"free"==e.row.payment_method||"Free"==e.row.payment_method?a("b-badge",{attrs:{variant:"info"}},[a("span",{domProps:{innerHTML:t._s(e.row.payment_method)}})]):t._e(),"upi"==e.row.payment_method||"UPI"==e.row.payment_method?a("b-badge",{attrs:{variant:"warning"}},[t._v("razorpay : "),a("span",{domProps:{innerHTML:t._s(e.row.payment_method)}})]):t._e(),"card"==e.row.payment_method||"CARD"==e.row.payment_method?a("b-badge",{attrs:{variant:"primary"}},[t._v("razorpay : "),a("span",{domProps:{innerHTML:t._s(e.row.payment_method)}})]):t._e(),"cash"==e.row.payment_method||"CASH"==e.row.payment_method?a("b-badge",{attrs:{variant:"primary"}},[a("span",{domProps:{innerHTML:t._s(e.row.payment_method)}})]):t._e()],1):t._e()]}},{key:"action",fn:function(e){return["action"==e.column.name?a("span",[a("b-dropdown",{staticClass:"m-2",attrs:{id:"dropdown-left",text:"Actions",variant:"outline-info"}},[a("b-dropdown-item",{on:{click:function(a){return t.viewRow(e.row)}}},[a("span",{staticClass:"text-primary"},[a("i",{staticClass:"mdi mdi-account-card-details"}),t._v(" Booking Details ")])])],1)],1):t._e()]}}])},[a("template",{slot:"global-search-clear-icon"},[a("i",{staticClass:"mdi mdi-account-search"})]),a("template",{slot:"refresh-button-text"},[a("i",{staticClass:"mdi mdi-sync-alert"}),t._v(" Refresh ")]),a("template",{slot:"reset-button-text"},[a("i",{staticClass:"mdi mdi-broom"}),t._v(" Reset filters ")]),a("template",{slot:"paginataion-previous-button"},[t._v(" Previous ")]),a("template",{slot:"paginataion-next-button"},[t._v(" Next ")]),a("template",{slot:"card-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"float-left"},[t._v(" Booking - "+t._s(t.bookingStatus.toUpperCase())+" ")])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"float-right"},[a("b-form",{attrs:{inline:""}},[a("label",{staticClass:"mr-2"},[t._v("Date Filters :")]),a("date-range-picker",{staticStyle:{height:"30px !important"},attrs:{"single-date-picker":!0,"always-show-calendar":!0,"show-week-numbers":!0,"time-picker":!0,ranges:!1,"show-dropdowns":!0,"auto-apply":!0,"locale-data":{firstDay:1,format:"dd-mm-yyyy"}},on:{update:t.updateDateRange},model:{value:t.pickerDates,callback:function(a){t.pickerDates=a},expression:"pickerDates"}},[[t._v(t._s(t.startDate)+" ")]],2)],1)],1)])])]),a("template",{slot:"vbt-action-buttons"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"float-right"})]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"float-left"},[a("download-excel",{staticClass:"btn btn-success",attrs:{data:t.excelDownload,name:t.excelName}},[t._v(" Excel "),a("i",{staticClass:"mdi mdi-file-excel-box"})])],1)])])])],2),a("b-modal",{ref:"myModalRefBookingHistory",attrs:{size:"xl","ok-title":t.modaloktitle},on:{hidden:t.hideModal,ok:t.handleOk}},[1==t.modalView?a("span",[a("modalView",{attrs:{modalData:t.modalData}})],1):t._e()])],1)])])])},o=[],r=(e("14d9"),e("0643"),e("4e3e"),e("dde5")),l=e("19cf"),n=e("12f9"),i=e("f2d9"),d=e("7f45"),c=e.n(d),m=e("bbf5"),_=e.n(m),p=e("a2b6"),u=e("be92"),b=e("83a3"),v=(e("53b4"),e("8a49")),h={name:"bookings",data(){let t=new Date,a=new Date;return a.setDate(a.getDate()+10),{title:"",breadcrumbs:{title:"Booking Lists",b1:"Manage Bookings",b2:"Bookings",b3:"Index",link:!1,name:"Booking lists"},bookingStatus:"",startDate:c()().startOf("day").toDate(),pickerDates:{startDate:t,endDate:a},columns:[{label:"PNR",name:"pnr_no",sort:!0},{label:"customer",name:"customer",sort:!0,html:!0},{label:"Date / Time",name:"date_time",sort:!0},{label:"Stop / Route",name:"stopping_points",sort:!0},{label:"Is Pass",name:"is_pass"},{label:"Method",name:"payment_method",sort:!0},{label:"Passengers",name:"passengers",sort:!0},{label:"Action",name:"action",sort:!1}],rows:[],config:{server_mode:!0,loaderText:"Updating...",pagination:!0,global_search:{placeholder:"Enter search bookings",visibility:!0,case_sensitive:!1,showClearButton:!1,searchOnPressEnter:!1,searchDebounceRate:1e3},per_page_options:[10,20,30,50,100],preservePageOnDataChange:!0,card_mode:!0},dropdowns:[],classes:{table:"table-bordered table-striped"},queryParams:{sort:[],filters:[],travel_status:"",global_search:"",per_page:10,page:1},total_rows:0,form:{id:"",name:"",slug:"",createdAt:""},showLoader:!1,modalView:!1,modalData:{},modaloktitle:"",customer_details:{}}},components:{VueBootstrap4Table:n["a"],Breadcrumb:l["a"],downloadExcel:i["a"],DateRangePicker:_.a,ModalView:v["a"]},computed:{excelDownload(){return r["d"].tranform(this.rows)},excelName(){return this.breadcrumbs.title+"_"+c()().local().unix()},...Object(u["e"])(b["a"],["dateFormat"])},watch:{"$route.params.travel_status"(t){this.bookingStatus=t,this.loadItems()}},mounted(){this.bookingStatus=this.$route.params.travel_status,this.loadItems()},methods:{format(t,a){return Object(p["a"])(t,a)},viewRow(t){this.title="Customer Booking History Details",this.modalView=!0,this.modalEdit=!1,this.modaloktitle="Ok",this.$refs.myModalRefBookingHistory.show(),this.modalData=t},hideModal(){this.$refs.myModalRefBookingHistory.hide(),this.modalEdit=!1,this.modalView=!1},handleOk(){this.$refs.myModalRefBookingHistory.hide(),this.modalEdit=!1,this.modalView=!1},onRefreshData(){this.showLoader=!0,this.loadItems()},onChangeQuery(t){this.queryParams=t,this.showLoader=!0,this.loadItems()},updateDateRange(t){this.showLoader=!0,this.queryParams.filters={type:"date",value:{startDate:t.startDate}},r["d"].getAll(this.queryParams).then(t=>{this.total_rows=t.data.totalRecords,this.rows=t.data.bookings,this.showLoader=!1})},loadItems(){this.queryParams.travel_status=this.$route.params.travel_status.toUpperCase(),r["d"].getAll(this.queryParams).then(t=>{this.total_rows=t.data.totalRecords,this.rows=t.data.bookings,this.showLoader=!1})},enableDropdowns(){this.$el.querySelectorAll('[data-toggle="dropdown"]').forEach(t=>{const a=t.nextElementSibling;let e=!1;function s(t){e=t,a.classList.toggle("show",e)}this.dropdowns.includes(a)||(this.dropdowns.push(a),t.addEventListener("click",t=>{t.preventDefault(),s(!e)}),a.addEventListener("click",t=>{t.preventDefault(),s(!1)}),a.clickOutsideEvent=e=>{const o=a===e.target||a.contains(e.target),r=t===e.target||t.contains(e.target);o||r||s(!1)},document.addEventListener("click",a.clickOutsideEvent))})}},updated(){this.enableDropdowns()},destroyed(){this.dropdowns.forEach(t=>{document.removeEventListener("click",t.clickOutsideEvent)})}},w=h,y=e("2877"),f=Object(y["a"])(w,s,o,!1,null,"6d90c90d",null);a["default"]=f.exports}}]);
//# sourceMappingURL=chunk-e25a9d88.a4adfaba.js.map