(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bbfa454"],{"19cf":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"level"},[t("div",{staticClass:"level-left"},[t("ul",[t("li",{staticClass:"is-active"},[t("a",[e._v(e._s(e.breadcrumbs.b1))])]),t("li",{staticClass:"is-active"},[t("a",[e._v(e._s(e.breadcrumbs.title))])])])])])])},r=[],o={name:"breadcrumb",props:["breadcrumbs"]},s=o,l=(a("2c06"),a("2877")),n=Object(l["a"])(s,i,r,!1,null,"7cf2419e",null);t["a"]=n.exports},"2c06":function(e,t,a){"use strict";a("526f")},"526f":function(e,t,a){},"81f0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("section",{staticClass:"tables"},[t("div",{staticClass:"row"},[t("Breadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.updateDriver.apply(null,arguments)}}},[t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{cols:"12",md:"6"}},[t("b-card",{attrs:{title:"Driver Information"}},[t("b-card-text",[t("b-form-group",{attrs:{label:"First Name","label-for":"firstname-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.firstname.$error},attrs:{id:"firstname-input",type:"text",placeholder:"Enter first name",state:e.validateState("firstname")},model:{value:e.$v.form.firstname.$model,callback:function(t){e.$set(e.$v.form.firstname,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.firstname.$model"}}),e.submitted||!e.$v.form.firstname.required?t("b-form-invalid-feedback",[e._v(" first name is required ")]):e._e(),e.$v.form.firstname.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{attrs:{label:"Last Name","label-for":"lastname-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.lastname.$error},attrs:{id:"lastname-input",type:"text",placeholder:"Enter last name",state:e.validateState("lastname")},model:{value:e.$v.form.lastname.$model,callback:function(t){e.$set(e.$v.form.lastname,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.lastname.$model"}}),e.submitted||!e.$v.form.lastname.required?t("b-form-invalid-feedback",[e._v(" last name is required ")]):e._e(),e.$v.form.lastname.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{attrs:{label:"Email Address","label-for":"email-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.form.email.$error},attrs:{id:"email-input",type:"email",placeholder:"Enter email address",state:e.validateState("email")},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.email.$model"}}),e.submitted||!e.$v.form.email.required?t("b-form-invalid-feedback",[e._v(" email address is required ")]):e._e(),e.$v.form.email.email?e._e():t("b-form-invalid-feedback",[e._v("Please enter a valid email address")])],1),t("b-form-group",{attrs:{label:"Country code","label-for":"country-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.country_code.$error},attrs:{options:e.countries,state:e.validateState("country_code")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an country code --")])]},proxy:!0}]),model:{value:e.$v.form.country_code.$model,callback:function(t){e.$set(e.$v.form.country_code,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.country_code.$model"}}),e.submitted||!e.$v.form.country_code.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" country code is required ")]):e._e()],1),t("b-form-group",{attrs:{label:"Phone Number","label-for":"phone-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.form.phone.$error},attrs:{id:"phone-input",placeholder:"Enter phone number",state:e.validateState("phone")},model:{value:e.$v.form.phone.$model,callback:function(t){e.$set(e.$v.form.phone,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.phone.$model"}}),e.submitted||!e.$v.form.phone.required?t("b-form-invalid-feedback",[e._v(" Mobile number is required ")]):e._e(),e.$v.form.phone.minLength?e._e():t("b-form-invalid-feedback",[e._v(" Mobile number must hav at min "+e._s(e.$v.form.phone.$params.minLength.min)+" letters. ")]),e.$v.form.phone.maxLength?e._e():t("b-form-invalid-feedback",[e._v(" Mobile number must have at max "+e._s(e.$v.form.phone.$params.maxLength.max)+" letters. ")]),e.$v.form.national_id.uniquePhone?e._e():t("b-form-invalid-feedback",[e._v(" This mobile number is already registered. ")])],1),t("b-form-group",{attrs:{label:"National ID","label-for":"national-id-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.national_id.$error},attrs:{id:"national-id-input",placeholder:"Enter national id number",state:e.validateState("phone")},model:{value:e.$v.form.national_id.$model,callback:function(t){e.$set(e.$v.form.national_id,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.national_id.$model"}}),e.submitted||!e.$v.form.national_id.required?t("b-form-invalid-feedback",[e._v(" National Id number is required ")]):e._e(),e.$v.form.national_id.uniqueNationalId?e._e():t("b-form-invalid-feedback",[e._v(" This National Id number is already registered. ")])],1),t("b-form-group",{staticClass:"mt-3",attrs:{label:"Type ","label-for":"type-input","invalid-feedback":"type is required","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-radio-group",{class:{"is-invalid":e.submitted||e.$v.form.type.$error},attrs:{options:e.option_types,name:"type",state:e.validateState("type")},on:{change:e.checkType},model:{value:e.$v.form.type.$model,callback:function(t){e.$set(e.$v.form.type,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.type.$model"}}),e.submitted||!e.$v.form.type.required?t("b-form-invalid-feedback",[e._v("Please select type")]):e._e()],1),t("b-form-group",{staticClass:"mt-3",attrs:{label:"Status ","label-for":"status-input","invalid-feedback":"status is required","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-radio-group",{class:{"is-invalid":e.submitted||e.$v.form.status.$error},attrs:{options:e.options,name:"status",state:e.validateState("status")},model:{value:e.$v.form.status.$model,callback:function(t){e.$set(e.$v.form.status,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.status.$model"}}),e.submitted||!e.$v.form.status.required?t("b-form-invalid-feedback",[e._v("Please select status")]):e._e()],1)],1)],1)],1),t("b-col",{attrs:{cols:"12",md:"6"}},[t("b-card",{attrs:{title:"Documents"}},[t("b-card-text",[t("b-form-group",{attrs:{label:"Profile picture","label-for":"picture-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.picture?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.picture,width:"80",height:"80"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("picture")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"picture-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a Profile picture or drop it here..."},on:{change:function(t){return e.onFileChange(t,"picture")}}})],1)]),e.show?t("b-form-group",{attrs:{label:"Licence","label-for":"licence-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.document_licence?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.document_licence,width:"250",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("document_licence")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"licence-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a Licence or drop it here..."},on:{change:function(t){return e.onFileChange(t,"document_licence")}}})],1)]):e._e(),e.show?t("b-form-group",{attrs:{label:"Licence Expiry Date","label-for":"licence-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"licence-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.licence_expiry_date.$model,callback:function(t){e.$set(e.$v.form.licence_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.licence_expiry_date.$model"}})],1)]):e._e(),e.show?t("b-form-group",{attrs:{label:"National ICard","label-for":"national-icard-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.document_national_icard?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.document_national_icard,width:"250",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("document_national_icard")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"national-icard-input",accept:"image/jpeg, image/png, image/jpg",placeholder:"Choose a national ICard or drop it here..."},on:{change:function(t){return e.onFileChange(t,"document_national_icard")}}})],1)]):e._e(),t("b-form-group",{attrs:{label:"Police Vertification","label-for":"police-vertification-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e.form.document_police_vertification?t("div",[t("img",{staticClass:"img-fluid",attrs:{src:e.form.document_police_vertification,width:"250",height:"250"}}),t("button",{staticClass:"btn social-btn btn-rounded btn-danger mr-4",on:{click:function(t){return e.removeImage("document_police_vertification")}}},[t("i",{staticClass:"mdi mdi-close"})])]):t("div",[t("b-form-file",{attrs:{id:"police-vertification-input",accept:"image/jpeg, image/png, image/gif",placeholder:"Choose a Police Vertification or drop it here..."},on:{change:function(t){return e.onFileChange(t,"document_police_vertification")}}})],1)]),t("b-form-group",{attrs:{label:"Police Varification Expiry Date","label-for":"police-varification-expiry-date-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("div",[t("b-form-input",{attrs:{id:"police-varification-expiry-date-input",type:"date",placeholder:"Select Date"},model:{value:e.$v.form.police_vertification_expiry_date.$model,callback:function(t){e.$set(e.$v.form.police_vertification_expiry_date,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.police_vertification_expiry_date.$model"}})],1)])],1)],1)],1),t("b-col",{attrs:{cols:"12",md:"12"}},[t("br"),t("b-form-group",{staticClass:"col-md-6 offset-md-4"},[t("b-button",{staticClass:"btn btn-lg btn-success text-center mr-3",attrs:{type:"submit"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.submitted,expression:"submitted"}],staticClass:"pl-2 spinner-border spinner-border-sm"}),e._v("Update")]),t("b-button",{staticClass:"btn btn-lg btn-default text-center",attrs:{to:{name:"driver"}}},[e._v(" Back")])],1)],1)],1)],1)],1)],1)])])},r=[],o=(a("14d9"),a("0643"),a("fffc"),a("19cf")),s=a("dde5"),l=a("1dce"),n=a("b5ae"),c=a("be92"),m=a("370e"),d=a("a2b6"),u={name:"driveredit",mixins:[l["validationMixin"]],data(){return{breadcrumbs:{title:"Edit Driver",b1:"Manage Drivers",b2:"Drivers",b3:"Index",link:!0,name:"driver"},options:[{text:"Active",value:"true"},{text:"Inactive",value:"false",default:!0}],option_types:[{text:"Driver",value:"driver"},{text:"Assistant",value:"assistant",default:"assistant"}],form:{adminId:"",firstname:"",lastname:"",email:"",phone:"",national_id:"",country_code:null,picture:"",document_licence:"",licence_expiry_date:"",document_national_icard:"",document_police_vertification:"",police_vertification_expiry_date:"",status:"",type:""},submitted:!1,loading:!1,error:"",success:"",show:!0,countries:[]}},validations:{form:{email:{required:n["required"],email:n["email"]},firstname:{required:n["required"],alpha:n["alpha"]},lastname:{required:n["required"],alpha:n["alpha"]},country_code:{required:n["required"]},status:{required:n["required"]},type:{required:n["required"]},phone:{required:n["required"],numeric:n["numeric"],minLength:Object(n["minLength"])(10),maxLength:Object(n["maxLength"])(10),async uniquePhone(e){const{status:t}=await s["l"].isExists({name:e,id:this.$route.params.id});return t}},national_id:{required:n["required"],numeric:n["numeric"],async uniqueNationalId(e){const{status:t}=await s["l"].isExists({name:e,id:this.$route.params.id});return t}},licence_expiry_date:{},police_vertification_expiry_date:{}}},computed:{...Object(c["e"])(m["a"],["getUser"])},components:{Breadcrumb:o["a"]},mounted(){this.getDriver(),this.loadCountries()},methods:{async loadCountries(){const e=await s["i"].load({search:""});this.countries=e.items},checkType(e){this.show="assistant"!==e},onFileChange(e,t){var a=e.target.files||e.dataTransfer.files;console.log(a),a.length&&this.createImage(a[0],t)},createImage(e,t){var a=new FileReader,i=this;a.onload=e=>{i.form[t]=e.target.result},a.readAsDataURL(e)},removeImage:function(e){this.form[e]=""},validateState(e){const{$dirty:t,$error:a}=this.$v.form[e];return t?!a:null},async getDriver(){try{const e=await s["l"].find(this.$route.params.id);e.status&&(e.data.licence_expiry_date=Object(d["a"])(e.data.licence_expiry_date,"Y-MM-DD"),e.data.police_vertification_expiry_date=Object(d["a"])(e.data.police_vertification_expiry_date,"Y-MM-DD"),"assistant"===e.data.type?this.show=!1:this.show=!0,this.form=e.data)}catch(e){console.log("params",e),this.$toast.open({message:e,type:"error",position:"top-right",duration:5e3})}},async updateDriver(){try{if(this.submitted=!0,this.$v.form.$touch(),this.$v.form.$invalid)return this.submitted=!1,void window.scrollTo({top:4,left:0,behavior:"smooth"});this.form.adminId=this.getUser.id;const e=await s["l"].update(this.$route.params.id,this.form);e.status&&(this.submitted=!1,this.$toast.open({message:e.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/drivers"}),2e3))}catch(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:5e3})}}}},f=u,b=a("2877"),p=Object(b["a"])(f,i,r,!1,null,"1095982f",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5bbfa454.f9f49240.js.map