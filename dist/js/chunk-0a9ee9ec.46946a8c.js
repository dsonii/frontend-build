(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a9ee9ec"],{"0902":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("section",{staticClass:"tables"},[t("div",{staticClass:"row"},[t("Breadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),t("div",{staticClass:"col-lg-10 offset-lg-1 grid-margin stretch-card"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("createForm")],1)])])],1)])])},a=[],o=s("19cf"),i=function(){var e=this,t=e._self._c;return t("div",[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.createAssign.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Vehicle Schedule","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("multiselect",{class:{"is-invalid":e.submitted||e.$v.form.route.$error},attrs:{state:e.validateState("route"),options:e.roptions,placeholder:"start typing to search Route Name",label:"route_name","track-by":"id",searchable:!0,loading:e.submitted},on:{"search-change":e.fetchRoutes},scopedSlots:e._u([{key:"option",fn:function(s){return[t("p",[e._v("Route : "+e._s(s.option.route_name))]),t("p",[e._v(" "+e._s(e.momentFormat(s.option.departure_time,e.timeFormat.value))+" - "+e._s(e.momentFormat(s.option.arrival_time,e.timeFormat.value))+" ")])]}}]),model:{value:e.$v.form.route.$model,callback:function(t){e.$set(e.$v.form.route,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.route.$model"}},[t("template",{slot:"noOptions"},[e._v(" No Route name found.")]),t("template",{slot:"noResult"},[e._v(" Route name searched not matched.")])],2),e.submitted||!e.$v.form.route.required?t("b-form-invalid-feedback",[e._v(" Route name is required ")]):e._e()],1),t("b-form-group",{attrs:{label:"Driver","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("multiselect",{class:{"is-invalid":e.submitted||e.$v.form.driver.$error},attrs:{state:e.validateState("driver"),options:e.options,placeholder:"start typing to drivers phone, name..",label:"title","track-by":"title",searchable:!0,loading:e.submitted},on:{"search-change":e.fetchDrivers},scopedSlots:e._u([{key:"option",fn:function(s){return[t("b-img",{attrs:{width:"40",height:"40",variant:"primary",src:s.option.picture}}),e._v(" "+e._s(s.option.title)+" : +"+e._s(s.option.country_code)+e._s(s.option.phone)+" ")]}}]),model:{value:e.$v.form.driver.$model,callback:function(t){e.$set(e.$v.form.driver,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.driver.$model"}},[t("template",{slot:"noOptions"},[e._v(" No driver found.")]),t("template",{slot:"noResult"},[e._v(" Driver searched not matched.")])],2),e.submitted||!e.$v.form.driver.required?t("b-form-invalid-feedback",[e._v(" Driver name is required ")]):e._e()],1),t("b-form-group",{attrs:{label:"Dates","label-for":"name-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("date-picker",{attrs:{"disabled-date":e.disabledBeforeTodayAndAfterAWeek,multiple:"",format:"YYYY-MM-DD","value-type":"format",placeholder:"Please select the dates",clearable:!0,inline:!0},scopedSlots:e._u([{key:"input",fn:function({props:s}){return e._l(s.value.split(","),(function(s){return t("b-badge",{key:s,staticClass:"mr-1",attrs:{variant:"primary"}},[e._v(e._s(s)+" ")])}))}}]),model:{value:e.form.dates,callback:function(t){e.$set(e.form,"dates",t)},expression:"form.dates"}})],1),t("b-form-group",{staticClass:"col-md-6 offset-md-5"},[t("b-button",{staticClass:"btn btn-lg btn-success text-center",attrs:{type:"submit"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.submitted,expression:"submitted"}],staticClass:"pl-2 spinner-border spinner-border-sm"}),e._v("Submit")])],1)],1)],1)},n=[],l=(s("14d9"),s("dde5")),c=s("1dce"),d=s("b5ae"),m=s("2ef0"),u=s.n(m),p=s("7f45"),b=s.n(p),f=s("be92"),h=s("370e"),v=s("83a3"),g=s("ec45"),_=(s("411c"),s("8e5f")),y=s.n(_),$=s("a2b6"),k={mixins:[c["validationMixin"]],name:"createform",data(){return{submitted:!1,loading:!1,options:[],aoptions:[],roptions:[],form:{route:null,driver:"",assistant:"",dates:[]},minDatetime:"",maxDatetime:""}},validations:{form:{route:{required:d["required"]},driver:{required:d["required"]},assistant:{}}},computed:{...Object(f["e"])(h["a"],["getUser"]),...Object(f["e"])(v["a"],["timezone","dateFormat","timeFormat"])},components:{DatePicker:g["a"],Multiselect:y.a},mounted(){this.form.dates=this.currentDate()},methods:{currentDate:()=>[b()().format("YYYY-MM-DD")],momentFormat(e,t){return Object($["a"])(e,t)},selectDriver(e){this.form.driver=e},disabledBeforeTodayAndAfterAWeek(e){const t=new Date;t.setHours(0,0,0,0);const s=e<t||e>new Date(t.getTime()+2592e6);return console.log("current_date",s),s},validateState(e){const{$dirty:t,$error:s}=this.$v.form[e];return t?!s:null},fetchRoutes(e,t){this.search3(t,e,this)},fetchDrivers(e,t){if(e.length){let s="driver";this.search(t,e,s,this)}},fetchAssistants(e,t){if(e.length){let s="assistant";this.search2(t,e,s,this)}},search:u.a.debounce(async(e,t,s,r)=>{try{const e=await l["l"].q({type:s,search:t});r.options=e.items}catch(a){console.log("err",a)}},350),search2:u.a.debounce(async(e,t,s,r)=>{try{const e=await l["l"].q({type:s,search:t});r.aoptions=e.items}catch(a){console.log("err",a)}},350),search3:u.a.debounce(async(e,t,s)=>{try{const{data:e}=await l["e"].q({search:t});s.roptions=e}catch(r){console.log("err",r)}},350),async createAssign(){try{if(this.submitted=!0,this.$v.$touch(),this.$v.$invalid)return void(this.submitted=!1);this.form.adminId=this.getUser.id;const e=await l["b"].create(this.form);e.status?(this.submitted=!1,this.$toast.open({message:e.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/trips/assign/list"}),3e3)):(this.submitted=!1,this.$toast.open({message:e.message,type:"error",position:"top-right",duration:3e3}))}catch(e){this.$toast.open({message:e+"dfsdf",type:"error",position:"top-right",duration:5e3})}}}},D=k,w=(s("ad8c"),s("1583"),s("2877")),A=Object(w["a"])(D,i,n,!1,null,"4935c566",null),q=A.exports,x={name:"tripassigncreate",data(){return{breadcrumbs:{title:"Create Assign",b1:"Manage Assign",b2:"Assign",b3:"Index",link:!0,name:"Assign"}}},components:{Breadcrumb:o["a"],createForm:q}},C=x,F=Object(w["a"])(C,r,a,!1,null,null,null);t["default"]=F.exports},ad8c:function(e,t,s){"use strict";s("f56a")},f56a:function(e,t,s){}}]);
//# sourceMappingURL=chunk-0a9ee9ec.46946a8c.js.map