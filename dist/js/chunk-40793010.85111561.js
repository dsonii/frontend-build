(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40793010"],{"308e":function(t,e,s){"use strict";s("37bf")},"37bf":function(t,e,s){},"423d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"tables"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.createRoute.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("Breadcrumb",{attrs:{breadcrumbs:t.breadcrumbs}}),e("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("b-form-group",{attrs:{label:"Title","label-for":"title-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-input",{class:{"is-invalid":t.submitted&&t.$v.form.title.$error},attrs:{id:"title-input",type:"text",placeholder:"Enter title ",state:t.validateState("title")},model:{value:t.$v.form.title.$model,callback:function(e){t.$set(t.$v.form.title,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.title.$model"}}),t.submitted&&!t.$v.form.title.required?e("div",{staticClass:"invalid-feedback"},[t._v(" title is required ")]):t._e()],1),e("b-form-group",{attrs:{label:"Departure / Arrival stop","label-for":"title-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("multiselect",{attrs:{options:t.options,placeholder:"start typing to search Departure / Arrival stop.",label:"title","track-by":"title",searchable:!0,loading:t.submitted},on:{"search-change":t.fetchLocations},scopedSlots:t._u([{key:"option",fn:function(e){return[t._v(" "+t._s(e.option.title)+" ")]}}]),model:{value:t.form.stops[0].location,callback:function(e){t.$set(t.form.stops[0],"location","string"===typeof e?e.trim():e)},expression:"form.stops[0].location"}},[e("template",{slot:"noOptions"},[t._v(" No Departure / Arrival stop found.")]),e("template",{slot:"noResult"},[t._v(" Departure / Arrival stop searched not matched.")])],2)],1)],1)])]),e("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-bordered",attrs:{id:"ferriRouteTable"}},[e("thead",[e("tr",[e("th",{staticClass:"col-md-5",attrs:{scope:"col"}},[t._v("Stops")]),e("th",{staticClass:"col-md-3",attrs:{scope:"col"}},[t._v("Minimum Fare")]),e("th",{staticClass:"col-md-4",attrs:{scope:"col"}},[t._v("Price per km")]),e("th")])]),e("tbody",t._l(this.form.stops,(function(s,a){return e("tr",{key:a,attrs:{id:"fr_Route_122"}},[e("td",{attrs:{scope:"row"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[t._v(t._s(a+1))]),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("multiselect",{attrs:{options:t.options,placeholder:"start typing to search locations..",label:"title","track-by":"title",searchable:!0,loading:t.submitted},on:{"search-change":t.fetchPDLocations},scopedSlots:t._u([{key:"option",fn:function(e){return[t._v(" "+t._s(e.option.title)+" ")]}}],null,!0),model:{value:s.location,callback:function(e){t.$set(s,"location","string"===typeof e?e.trim():e)},expression:"data.location"}},[e("template",{slot:"noOptions"},[t._v(" No stop found.")]),e("template",{slot:"noResult"},[t._v(" Stop searched not matched.")])],2)],1)])])]),e("td",[e("div",{staticClass:"row"},[e("label",{staticClass:"col-sm-4"},[t._v("if pick-up")]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.minimum_fare_pickup,expression:"data.minimum_fare_pickup"}],staticClass:"form-control",attrs:{type:"number",min:"1",value:"1"},domProps:{value:s.minimum_fare_pickup},on:{input:function(e){e.target.composing||t.$set(s,"minimum_fare_pickup",e.target.value)}}})])]),e("div",{staticClass:"row"},[e("label",{staticClass:"col-sm-4"},[t._v("if drop")]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.minimum_fare_drop,expression:"data.minimum_fare_drop"}],staticClass:"form-control",attrs:{type:"number",min:"1",value:"1"},domProps:{value:s.minimum_fare_drop},on:{input:function(e){e.target.composing||t.$set(s,"minimum_fare_drop",e.target.value)}}})])])]),e("td",[e("div",{staticClass:"row"},[e("label",{staticClass:"col-sm-3"},[t._v("if pick-up")]),e("div",{staticClass:"col-sm-9"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.price_per_km_pickup,expression:"data.price_per_km_pickup"}],staticClass:"form-control",attrs:{type:"number",min:"1","aria-label":"Amount (to the nearest rupee)"},domProps:{value:s.price_per_km_pickup},on:{input:function(e){e.target.composing||t.$set(s,"price_per_km_pickup",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[t._v(".00")])])])])]),e("div",{staticClass:"row"},[e("label",{staticClass:"col-sm-3"},[t._v("if drop")]),e("div",{staticClass:"col-sm-9"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.price_per_km_drop,expression:"data.price_per_km_drop"}],staticClass:"form-control",attrs:{type:"number",min:"1","aria-label":"Amount (to the nearest rupee)"},domProps:{value:s.price_per_km_drop},on:{input:function(e){e.target.composing||t.$set(s,"price_per_km_drop",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[t._v(".00")])])])])])]),e("td",{staticClass:"trashIconContainer"},[a>0?e("span",[e("i",{staticClass:"mdi mdi-delete-forever mdi-24px",on:{click:function(e){return t.removeRow(a,s)}}})]):t._e()])])})),0)]),e("div",{staticClass:"d-flex justify-content-center"},[e("input",{staticClass:"btn btn-outline-primary mt-4",attrs:{name:"addpd",type:"button",value:"+ Add pick-up / drop off location"},on:{click:t.addRow}})])])])]),e("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("b-form-group",{staticClass:"mt-3",attrs:{label:"Status ","label-for":"status-input","invalid-feedback":"status is required","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[e("b-form-radio-group",{attrs:{options:t.statusOptions,name:"status"},model:{value:t.$v.form.status.$model,callback:function(e){t.$set(t.$v.form.status,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.status.$model"}}),t.submitted&&!t.$v.form.status.required?e("b-form-invalid-feedback",[t._v("Please select one")]):t._e()],1),e("br"),e("br"),e("b-form-group",{staticClass:"col-md-6 offset-md-5"},[e("b-button",{staticClass:"btn btn-success btn-lg text-center mr-2",attrs:{type:"submit"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.submitted,expression:"submitted"}],staticClass:"pl-2 spinner-border spinner-border-sm"}),t._v(" Create")]),e("b-button",{staticClass:"btn btn-default btn-lg text-center",attrs:{to:{name:"route"}}},[t._v("Back")])],1)],1)])])],1)])],1)},i=[],o=(s("14d9"),s("19cf")),r=s("1dce"),l=s("b5ae"),n=s("dde5"),c=s("2ef0"),p=s.n(c),u=s("8e5f"),m=s.n(u),d={mixins:[r["validationMixin"]],name:"routes",components:{Breadcrumb:o["a"],Multiselect:m.a},data(){return{breadcrumbs:{title:"Create Route",b1:"Manage Routes",b2:"Routes",b3:"Index",link:!0,name:"route"},submitted:!1,loading:!1,options:[],pds:[],form:{title:"",stops:[{location:[{}],duration_pickup:"",duration_drop:"",minimum_fare_pickup:"",minimum_fare_drop:"",price_per_km_pickup:"",price_per_km_drop:"",files:[]}],status:!0},buses:[],statusOptions:[{text:"Active",value:!0},{text:"Inactive",value:!1}]}},validations:{form:{title:{required:l["required"]},status:{required:l["required"]}}},methods:{addRow:function(){this.form.stops.push({location:[{}],duration_pickup:"",duration_drop:"",minimum_fare_pickup:"",minimum_fare_drop:"",price_per_km_pickup:"",price_per_km_drop:"",files:""})},removeRow(t,e){console.log("data",t,e);var s=this.form.stops.indexOf(e);console.log(s,t),s>-1&&this.form.stops.splice(s,1)},validateState(t){const{$dirty:e,$error:s}=this.$v.form[t];return e?!s:null},async createRoute(){try{if(this.submitted=!0,this.$v.$touch(),this.$v.$invalid)return;const t=await n["y"].create(this.form);t.status&&(this.submitted=!1,this.$toast.open({message:t.message,type:"success",position:"top-right",duration:2e3}),setTimeout(()=>this.$router.push({path:"/routes"}),2e3))}catch(t){this.$toast.open({message:t,type:"error",position:"top-right",duration:5e3})}},fetchLocations(t,e){if(t.length){let s="DA";this.search(e,t,s,this)}},search:p.a.debounce(async(t,e,s,a)=>{try{const t=await n["n"].search({type:s,search:e});a.options=t.items}catch(i){(void 0).$toast.open({message:i,type:"error",position:"top-right",duration:5e3})}},350),fetchPDLocations(t,e){if(t.length){let s="PD";this.pdSearch(e,t,s,this)}},pdSearch:p.a.debounce(async(t,e,s,a)=>{try{const t=await n["n"].search({type:s,search:e});a.options=t.items}catch(i){(void 0).$toast.open({message:i,type:"error",position:"top-right",duration:5e3})}},350)}},v=d,f=(s("308e"),s("1583"),s("2877")),b=Object(f["a"])(v,a,i,!1,null,"7b7962f8",null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-40793010.85111561.js.map