(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba90a"],{"386e":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("section",{staticClass:"tables"},[t("div",{staticClass:"row"},[t("Breadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),t("div",{staticClass:"col-lg-8 offset-lg-2 grid-margin stretch-card"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.createUser.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Company Name","label-for":"company-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.company.$error},attrs:{id:"company-input",type:"text",placeholder:"Enter company name",state:e.validateState("company")},model:{value:e.$v.form.company.$model,callback:function(t){e.$set(e.$v.form.company,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.company.$model"}}),e.submitted||!e.$v.form.company.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" company name is required ")]):e._e(),e.$v.form.company.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{attrs:{label:"Customer Code","label-for":"customer-code-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.customer_code.$error},attrs:{id:"customer-code-input",type:"text",placeholder:"Enter customer code",state:e.validateState("customer_code")},model:{value:e.$v.form.customer_code.$model,callback:function(t){e.$set(e.$v.form.customer_code,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.customer_code.$model"}}),e.submitted||!e.$v.form.customer_code.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" customer code name is required ")]):e._e(),e.$v.form.customer_code.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{attrs:{label:"First Name","label-for":"firstname-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.firstname.$error},attrs:{id:"firstname-input",type:"text",placeholder:"Enter first name",state:e.validateState("firstname")},model:{value:e.$v.form.firstname.$model,callback:function(t){e.$set(e.$v.form.firstname,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.firstname.$model"}}),e.submitted||!e.$v.form.firstname.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" first name is required ")]):e._e(),e.$v.form.firstname.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{attrs:{label:"Last Name","label-for":"lastname-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.lastname.$error},attrs:{id:"lastname-input",type:"text",placeholder:"Enter last name",state:e.validateState("lastname")},model:{value:e.$v.form.lastname.$model,callback:function(t){e.$set(e.$v.form.lastname,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.lastname.$model"}}),e.submitted||!e.$v.form.lastname.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" last name is required ")]):e._e(),e.$v.form.lastname.alpha?e._e():t("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[e._v("Only alphabetic characters are allowed")])],1),t("b-form-group",{staticClass:"mt-3",attrs:{label:"Gender","label-for":"gender-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-radio-group",{class:{"is-invalid":e.submitted||e.$v.form.gender.$error},attrs:{options:e.gender_options,state:e.validateState("gender"),name:"gender"},model:{value:e.$v.form.gender.$model,callback:function(t){e.$set(e.$v.form.gender,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.gender.$model"}}),e.submitted||!e.$v.form.gender.required?t("b-form-invalid-feedback",[e._v("Please select Gender")]):e._e()],1),t("b-form-group",{attrs:{label:"Email Address","label-for":"email-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.form.email.$error},attrs:{id:"email-input",type:"email",placeholder:"Enter email address",state:e.validateState("email")},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.email.$model"}}),e.submitted||!e.$v.form.email.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" email address is required ")]):e._e()],1),t("b-form-group",{attrs:{label:"Country code","label-for":"country-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.country_code.$error},attrs:{options:e.countries,state:e.validateState("country_code")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an country code --")])]},proxy:!0}]),model:{value:e.$v.form.country_code.$model,callback:function(t){e.$set(e.$v.form.country_code,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.country_code.$model"}})],1),t("b-form-group",{attrs:{label:"Mobile Number","label-for":"phone-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.phone.$error},attrs:{id:"phone-input",placeholder:"Enter phone number",state:e.validateState("phone")},model:{value:e.$v.form.phone.$model,callback:function(t){e.$set(e.$v.form.phone,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.phone.$model"}}),e.submitted||!e.$v.form.phone.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" mobile number is required ")]):e._e(),e.$v.form.phone.minLength?e._e():t("b-form-invalid-feedback",[e._v(" mobile number must have at least "+e._s(e.$v.form.phone.$params.minLength.min)+" letters. ")]),e.$v.form.phone.maxLength?e._e():t("b-form-invalid-feedback",[e._v(" mobile number must have at least "+e._s(e.$v.form.phone.$params.maxLength.max)+" letters. ")]),e.$v.form.phone.uniquePhone?e._e():t("b-form-invalid-feedback",[e._v(" Phone number already exists. ")])],1),t("b-form-group",{attrs:{label:"Pickup Location","label-for":"title-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("multiselect",{attrs:{options:e.locationOptions,placeholder:"Pickup Location",label:"title","track-by":"title",searchable:!0,loading:e.submitted},on:{"search-change":e.fetchLocations},scopedSlots:e._u([{key:"option",fn:function(t){return[e._v(" "+e._s(t.option.title)+" ")]}}]),model:{value:e.form.pickup_location[0].location,callback:function(t){e.$set(e.form.pickup_location[0],"location","string"===typeof t?t.trim():t)},expression:"form.pickup_location[0].location"}},[t("template",{slot:"noOptions"},[e._v(" No stop found.")]),t("template",{slot:"noResult"},[e._v(" stop searched not matched.")])],2)],1),t("b-form-group",{attrs:{label:"Drop Location","label-for":"title-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("multiselect",{attrs:{options:e.locationOptions,placeholder:"Drop Location",label:"title","track-by":"title",searchable:!0,loading:e.submitted},on:{"search-change":e.fetchLocations,select:e.onDropLocationSelect},scopedSlots:e._u([{key:"option",fn:function(t){return[e._v(" "+e._s(t.option.title)+" ")]}}]),model:{value:e.form.drop_location[0].location,callback:function(t){e.$set(e.form.drop_location[0],"location","string"===typeof t?t.trim():t)},expression:"form.drop_location[0].location"}},[t("template",{slot:"noOptions"},[e._v(" No stop found.")]),t("template",{slot:"noResult"},[e._v(" stop searched not matched.")])],2)],1),t("b-form-group",{attrs:{label:"Route","label-for":"route-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.route.$error},attrs:{options:e.routeOption,state:e.validateState("route")},on:{change:e.getBuses},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Route --")])]},proxy:!0}]),model:{value:e.$v.form.route.$model,callback:function(t){e.$set(e.$v.form.route,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.route.$model"}})],1),t("b-form-group",{attrs:{label:"Vehicle","label-for":"bus-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.bus.$error},attrs:{options:e.buses,state:e.validateState("bus")},on:{change:e.getAvaialbleSeats},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Vehicle --")])]},proxy:!0}]),model:{value:e.$v.form.bus.$model,callback:function(t){e.$set(e.$v.form.bus,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.bus.$model"}})],1),t("b-form-group",{attrs:{label:"Seat","label-for":"seat-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.seat.$error},attrs:{options:e.seats,state:e.validateState("seat")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Seat --")])]},proxy:!0}]),model:{value:e.$v.form.seat.$model,callback:function(t){e.$set(e.$v.form.seat,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.seat.$model"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[t("b-form-group",{attrs:{label:"Return Route","label-for":"returnroute-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.return_route.$error},attrs:{options:e.return_routeOption,state:e.validateState("return_route")},on:{change:e.getReturnBuses},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Route --")])]},proxy:!0}]),model:{value:e.$v.form.return_route.$model,callback:function(t){e.$set(e.$v.form.return_route,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.return_route.$model"}})],1),t("b-form-group",{attrs:{label:"Return Vehicle","label-for":"returnbus-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.return_bus.$error},attrs:{options:e.return_buses,state:e.validateState("return_bus")},on:{change:e.getReturnAvaialbleSeats},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Vehicle --")])]},proxy:!0}]),model:{value:e.$v.form.return_bus.$model,callback:function(t){e.$set(e.$v.form.return_bus,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.return_bus.$model"}})],1),t("b-form-group",{attrs:{label:"Return Seat","label-for":"returnseat-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-select",{class:{"is-invalid":e.submitted&&e.$v.form.return_seat.$error},attrs:{options:e.return_seats,state:e.validateState("return_seat")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{staticClass:"text-sm",attrs:{value:null,disabled:""}},[e._v("-- Please select an Seat --")])]},proxy:!0}]),model:{value:e.$v.form.return_seat.$model,callback:function(t){e.$set(e.$v.form.return_seat,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.return_seat.$model"}})],1)],1),t("b-form-group",{attrs:{label:"Is Return?","label-for":"return-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1",value:"1","unchecked-value":"0"},on:{change:function(t){return e.isReturn()}},model:{value:e.$v.form.has_return.$model,callback:function(t){e.$set(e.$v.form.has_return,"$model",t)},expression:"$v.form.has_return.$model"}})],1),t("b-form-group",{attrs:{label:"Time","label-for":"time-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-input",{class:{"is-invalid":e.submitted||e.$v.form.time_for_user.$error},attrs:{id:"time-input",type:"time",placeholder:"Enter time",state:e.validateState("time_for_user")},model:{value:e.$v.form.time_for_user.$model,callback:function(t){e.$set(e.$v.form.time_for_user,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.time_for_user.$model"}}),e.submitted||!e.$v.form.time_for_user.required?t("b-form-invalid-feedback",{staticClass:"invalid-feedback"},[e._v(" Time is required ")]):e._e()],1),t("b-form-group",{staticClass:"mt-3",attrs:{label:"Status ","label-for":"status-input","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7"}},[t("b-form-radio-group",{class:{"is-invalid":e.submitted||e.$v.form.is_active.$error},attrs:{options:e.options,state:e.validateState("is_active"),name:"status"},model:{value:e.$v.form.is_active.$model,callback:function(t){e.$set(e.$v.form.is_active,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.is_active.$model"}}),e.submitted||!e.$v.form.is_active.required?t("b-form-invalid-feedback",[e._v("Please select status")]):e._e()],1),t("b-form-group",{staticClass:"col-md-6 offset-md-4"},[t("b-button",{staticClass:"btn btn-lg btn-success text-center",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)])])],1)])])},s=[],a=(o("14d9"),o("19cf")),l=o("1dce"),i=o("b5ae"),n=o("dde5"),c=o("2ef0"),u=o.n(c),m=o("8e5f"),d=o.n(m),f={name:"customercreate",mixins:[l["validationMixin"]],data(){return{show:!1,breadcrumbs:{title:"Create Customer",b1:"Manage Customers",b2:"Customers",b3:"Index",link:!0,name:"customers"},locationOptions:[],loading:!1,form:{company:"",customer_code:"",firstname:"",lastname:"",email:"",country_code:null,phone:"",gender:"",time_for_user:"",is_active:"",busScheduleId:"",refercode:"",pickup_location:[{location:[{}]}],drop_location:[{location:[{}]}],route:null,bus:null,seat:null,return_route:null,return_bus:null,return_seat:null,has_return:""},submitted:!1,options:[{text:"Active",value:"true"},{text:"Inactive",value:"false",default:!0}],countries:[],routeOption:[],return_routeOption:[],buses:[],return_buses:[],seats:[],return_seats:[],gender_options:[{text:"Male",value:"Male",default:"Male"},{text:"Female",value:"Female"}],isLoading:!1}},components:{Breadcrumb:a["a"],Multiselect:d.a},validations:{form:{company:{required:i["required"]},customer_code:{required:i["required"]},email:{required:i["required"],email:i["email"]},firstname:{required:i["required"],alpha:i["alpha"]},lastname:{required:i["required"],alpha:i["alpha"]},phone:{required:i["required"],numeric:i["numeric"],minLength:Object(i["minLength"])(10),maxLength:Object(i["maxLength"])(10),async uniquePhone(e){if(""===e)return!0;const{status:t}=await n["k"].isExists({phone:e,id:""});return t}},is_active:{required:i["required"]},country_code:{required:i["required"]},gender:{required:i["required"]},route:{required:i["required"]},bus:{required:i["required"]},seat:{required:i["required"]},time_for_user:{},busScheduleId:{},refercode:{},has_return:{},return_route:{},return_bus:{},return_seat:{}}},mounted(){this.loadCountries()},methods:{isReturn:function(){1==this.form.has_return?(this.show=!0,this.searchReturnRoute()):this.show=!1},validateState(e){const{$dirty:t,$error:o}=this.$v.form[e];return t?!o:null},async loadCountries(){const e=await n["i"].load({search:""});this.countries=e.items},fetchLocations(e,t){if(e.length){let o="PD";this.search(t,e,o,this)}},search:u.a.debounce(async(e,t,o,r)=>{try{const e=await n["n"].searchLocation({type:o,search:t});r.locationOptions=e.items}catch(s){(void 0).$toast.open({message:s,type:"error",position:"top-right",duration:5e3})}},350),searchReturnRoute(){n["y"].searchRoute({drop_lat:this.form.pickup_location[0].location.coordinates[1],drop_long:this.form.pickup_location[0].location.coordinates[0],pickup_lat:this.form.drop_location[0].location.coordinates[1],pickup_long:this.form.drop_location[0].location.coordinates[0]}).then(e=>{this.return_routeOption=e.data})},onDropLocationSelect(){n["y"].searchRoute({pickup_lat:this.form.pickup_location[0].location.coordinates[1],pickup_long:this.form.pickup_location[0].location.coordinates[0],drop_lat:this.form.drop_location[0].location.coordinates[1],drop_long:this.form.drop_location[0].location.coordinates[0]}).then(e=>{this.routeOption=e.data})},getBuses(){if(this.routeOption.length>0)for(let e=0;e<this.routeOption.length;e++)this.routeOption[e].value==this.form.route&&(this.buses=[{text:this.routeOption[e].bus_details.name,value:this.routeOption[e].route_busId}])},getReturnBuses(){if(this.return_routeOption.length>0)for(let e=0;e<this.return_routeOption.length;e++)this.return_routeOption[e].value==this.form.return_route&&(this.return_buses=[{text:this.return_routeOption[e].bus_details.name,value:this.return_routeOption[e].route_busId}])},getAvaialbleSeats(){let e="";if(this.routeOption.length>0)for(let t=0;t<this.routeOption.length;t++)this.routeOption[t].value==this.form.route&&(e=this.routeOption[t].busScheduleId,this.form.busScheduleId=this.routeOption[t].busScheduleId);n["g"].searchSeat(this.form.bus,e).then(e=>{this.seats=e.data})},getReturnAvaialbleSeats(){let e="";if(this.return_routeOption.length>0)for(let t=0;t<this.return_routeOption.length;t++)this.return_routeOption[t].value==this.form.return_route&&(e=this.return_routeOption[t].busScheduleId,this.form.return_busScheduleId=this.return_routeOption[t].busScheduleId);n["g"].searchSeat(this.form.bus,e).then(e=>{this.return_seats=e.data})},async createUser(){try{if(this.submitted=!0,this.form.refercode=Date.now().toString(36)+Math.random().toString(36).substr(2),this.$v.$touch(),this.$v.$invalid)return void(this.submitted=!1);const e=await n["k"].create(this.form);e.status&&(this.submitted=!1,this.$toast.open({message:e.message,type:"success",position:"top-right",duration:3e3}),setTimeout(()=>this.$router.push({path:"/customers"}),3e3))}catch(e){console.log("e",e),this.$toast.open({message:e,type:"error",position:"top-right",duration:5e3})}}}},b=f,p=(o("1583"),o("2877")),v=Object(p["a"])(b,r,s,!1,null,"6da8a3cb",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0ba90a.535435eb.js.map